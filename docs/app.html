<html>
    <head>
        <title>App Fair App</title>
      <style>
            body {
                height: 100vh;
                margin: 0;
                background-disabled: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(115,115,115,1) 100%);
            }

            .outerlync {
              position: absolute;
              top: 50%;
              left: 50%;
              margin-right: -50%;
              transform: translate(-50%, -50%);
              display: inline-block;
              background: transparent;
            }

            img.innerlync {
              /* max-width: 15vw; */
              /* max-height: 15vh; */
            }

            body {
                color: rgba(255, 255, 255, 1.0);
                background-color: rgba(0, 0, 0, 1.0);
            }
        </style>
    </head>
</html>
<body>
    <div class="container-lg px-3 my-5 markdown-body">
        <div class="outerlync" style="text-align: center;">
            <div style="backdrop-filter: blur(10px);">
            <h1 id="apptitle" style="text-align: center; font-family: ui-rounded;">Welcome to the App Fair</h1>
            <hr />

            <p style="text-align: center; font-family: system-ui, Arial, sans-serif;">This app can be installed using App Fair.app, which can be downloaded from <a href="https://www.appfair.net">www.appfair.net</a></p>
            <a href="https://appfair.net"><img src="https://www.appfair.net/appfair-free-for-all.svg" width="450" alt="Free for all at the App Fair â€“ https://www.appfair.net" /></a>
            <hr />
            <p>
            <a id="applink" href="appfair://app"><img class="innerlync" width="180" height="180" id="appicon" src="https://github.com/App-Fair/App/releases/latest/download/App-Fair.png" /></a>
            </p>
            </div>
        </div>
    </div>


    <!-- e.g.: 
        file:///opt/src/github/appfair/App-Fair/docs/app.html#app/Tidal-Zone 
        file:///opt/src/github/appfair/App-Fair/docs/app.html#homebrew/cask/iterm2 
    -->
    <script>
        let appHash = window.location.hash;
        //console.log("HASH", appHash);

        if (typeof appHash === 'string') {    
            let appPath = appHash.substring(1)
            let appParts = appPath.split("/");
            let appID = appParts[appParts.length - 1];
            let appName = appID.replace("-", " ");
            if (appParts[0] == "app") { 
                let appImageLink = "https://github.com/" + appID + "/App/releases/latest/download/" + appID + ".png"

                document.getElementById("appicon").src = appImageLink;
            }

            document.getElementById("apptitle").innerHTML = appName;

            //let launchLink = "appfair://app/" + appID;
            let launchLink = "appfair://" + appPath;
            document.getElementById("applink").href = launchLink;

            // attempt to launch the app fair app
            document.location = launchLink;
        }
    </script>
</body>
